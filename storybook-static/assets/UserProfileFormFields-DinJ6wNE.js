import{j as f}from"./ThemeProvider-BemqQv5Y.js";import{r as w}from"./index-2yJIXLcc.js";import{a as h,i as A,s as U}from"./KcPageStory-dXwFLs0d.js";import{u as R}from"./useIsPasswordRevealed-Cyn0WLWq.js";import"./iframe-Ge25m0MO.js";import"./LoginOtpPage-ZGZR8QSV.js";import"./ThemeToggle-BAYkBRMN.js";import"./index-Bn05qqr6.js";/* empty css             */Array.prototype.every||(Array.prototype.every=function(i,t){var n,e;if(this==null)throw new TypeError("this is null or not defined");var s=Object(this),u=s.length>>>0;if(typeof i!="function"&&Object.prototype.toString.call(i)!=="[object Function]")throw new TypeError;for(arguments.length>1&&(n=t),e=0;e<u;){var o;if(e in s){var d;if(o=s[e],n?d=i.call(n,o,e,s):d=i(o,e,s),!d)return!1}e++}return!0});const C=(i,t)=>{if(!i)return"";const n=t.match(/{\d+}/g);if(!n)return"";const e=n.reduce((a,r)=>a+parseInt(r.replace("{","").replace("}","")),0);let s=i.replace(/\D+/g,"");if(parseInt(s)!=s)return"";s.length>e&&(s=s.substring(0,e));const u=n.reduce((a,r)=>a+`(\\d${r})`,"^");let o=new RegExp(u).exec(s);if(!o)return i;let d=t;for(let a=0;a<n.length;a++)d=d.replace(n[a],o[a+1]);return d},B=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;let N;const S=new WeakSet,T="kcNumberUnFormat",E=`input[data-${T}]`;function q(){N==null||N();const i=n=>{if(S.has(n))return;const e=n.closest("form");e!==null&&(e.addEventListener("submit",()=>{const s=n.getAttribute(`data-${T}`);s&&(n.value=H(n.value,s))}),S.add(n))};document.querySelectorAll(E).forEach(n=>{h(n instanceof HTMLInputElement),i(n)});const t=new MutationObserver(n=>{for(const e of n)e.type==="childList"&&e.addedNodes.length>0&&e.addedNodes.forEach(s=>{if(s.nodeType===Node.ELEMENT_NODE){const u=s.querySelector(E);u!==null&&(h(u instanceof HTMLInputElement),i(u))}})});t.observe(document.body,{childList:!0,subtree:!0}),N=()=>t.disconnect()}const H=(i,t)=>{if(!i)return"";const n=t.match(/{\d+}/g);if(!n)return"";const e=n.reduce((a,r)=>a+parseInt(r.replace("{","").replace("}","")),0);let s=i.replace(/\D+/g,"");if(parseInt(s)!=s)return"";s.length>e&&(s=s.substring(0,e));const u=n.reduce((a,r)=>a+`(\\d${r})`,"^");let o=new RegExp(u).exec(s);if(!o)return i;let d=t;for(let a=0;a<n.length;a++)d=d.replace(n[a],o[a+1]);return d};var z=function(i,t){var n={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t.indexOf(e)<0&&(n[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(i);s<e.length;s++)t.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(i,e[s])&&(n[e[s]]=i[e[s]]);return n};h();const $=new WeakMap;function W(i){const{kcContext:t}=i;e:{const e=$.get(t);if(e===void 0)break e;return e}const n=G(i);return $.set(t,n),n}function G(i){const{kcContext:t,doMakeUserConfirmPassword:n}=i;q();let e=K({kcContext:t});const s=new Set;return{dispatchFormAction:u=>{e=M({action:u,kcContext:t,doMakeUserConfirmPassword:n,state:e}),s.forEach(o=>o())},getFormState:()=>J({state:e}),subscribeToFormState:u=>(s.add(u),{unsubscribe:()=>{s.delete(u)}})}}function K(i){var t,n;const{kcContext:e}=i,{getErrors:s}=P({kcContext:e}),u=(()=>{var a;e:{if("profile"in e&&"attributesByName"in e.profile&&Object.keys(e.profile.attributesByName).length!==0)break e;if("register"in e&&e.register instanceof Object&&"formData"in e.register)return["firstName","lastName","email","username"].filter(r=>r!=="username"?!0:!e.realm.registrationEmailAsUsername).map(r=>{var c;return A({name:r,displayName:A(`\${${r}}`),required:!0,value:(c=e.register.formData[r])!==null&&c!==void 0?c:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(r){case"email":return"email";case"username":return"username";default:return}})()})});if("user"in e&&e.user instanceof Object)return["username","email","firstName","lastName"].filter(r=>r!=="username"?!0:e.user.editUsernameAllowed).map(r=>{var c;return A({name:r,displayName:A(`\${${r}}`),required:!0,value:(c=e.user[r])!==null&&c!==void 0?c:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(r){case"email":return"email";case"username":return"username";default:return}})()})});if("email"in e&&e.email instanceof Object)return[A({name:"email",displayName:A("${email}"),required:!0,value:(a=e.email.value)!==null&&a!==void 0?a:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:"email"})];h(!1,"Unable to mock user profile from the current kcContext")}return Object.values(e.profile.attributesByName).map(U)})();u.forEach(a=>{var r,c,l;e:{if(typeof a.group!="string")break e;const{group:x,groupDisplayHeader:b,groupDisplayDescription:y,groupAnnotations:I}=a;if(delete a.group,delete a.groupDisplayHeader,delete a.groupDisplayDescription,delete a.groupAnnotations,x==="")break e;a.group={name:x,displayHeader:b,displayDescription:y,annotations:I,html5DataAnnotations:{}}}a.validators.options!==void 0&&a.annotations.inputType===void 0&&(a.annotations.inputType="select"),F({attribute:a})&&(a.multivalued=!0),a.multivalued?((r=a.values)!==null&&r!==void 0||(a.values=a.value!==void 0?[a.value]:[]),delete a.value):((c=a.value)!==null&&c!==void 0||(a.value=(l=a.values)===null||l===void 0?void 0:l[0]),delete a.values)});e:{if(!e.passwordRequired)break e;u.forEach((a,r)=>{a.name===(e.realm.registrationEmailAsUsername?"email":"username")&&u.splice(r+1,0,{name:"password",displayName:A("${password}"),required:!0,readOnly:!1,validators:{},annotations:{},autocomplete:"new-password",html5DataAnnotations:{}},{name:"password-confirm",displayName:A("${passwordConfirm}"),required:!0,readOnly:!1,validators:{},annotations:{},html5DataAnnotations:{},autocomplete:"new-password"})})}const o=[];for(const a of u){e:{if(!a.multivalued)break e;const r=!((t=a.values)===null||t===void 0)&&t.length?a.values:[""];n:{if(F({attribute:a}))break n;const c=a.validators.multivalued;if(c===void 0)break n;const{min:l}=c;if(!l)break n;const x=parseInt(`${l}`);for(let b=r.length;b<x;b++)r.push("")}o.push({attribute:a,valueOrValues:r});continue}o.push({attribute:a,valueOrValues:(n=a.value)!==null&&n!==void 0?n:""})}return{formFieldStates:o.map(({attribute:a,valueOrValues:r})=>({attribute:a,errors:s({attributeName:a.name,formFieldStates:o}),hasLostFocusAtLeastOnce:r instanceof Array&&!F({attribute:a})?r.map(()=>!1):!1,valueOrValues:r}))}}const Z=new WeakMap;function J(i){const{state:t}=i;e:{const n=Z.get(t);if(n===void 0)break e;return n}return{formFieldStates:t.formFieldStates.map(n=>{var{errors:e,hasLostFocusAtLeastOnce:s,attribute:u}=n,o=z(n,["errors","hasLostFocusAtLeastOnce","attribute"]);return Object.assign({displayableErrors:e.filter(d=>{const a=typeof s=="boolean"?s:d.fieldIndex!==void 0?s[d.fieldIndex]:s[s.length-1];switch(d.source.type){case"server":return!0;case"other":switch(d.source.rule){case"requiredField":return a;case"passwordConfirmMatchesPassword":return a}h(!1);case"passwordPolicy":switch(d.source.name){case"length":return a;case"digits":return a;case"lowerCase":return a;case"upperCase":return a;case"specialChars":return a;case"notUsername":return!0;case"notEmail":return!0}h(!1);case"validator":switch(d.source.name){case"length":return a;case"pattern":return a;case"email":return a;case"integer":return a;case"multivalued":return a;case"options":return a}h(!1)}}),attribute:u},o)}),isFormSubmittable:t.formFieldStates.every(({errors:n})=>n.length===0)}}function M(i){const{kcContext:t,doMakeUserConfirmPassword:n,action:e}=i;let{state:s}=i;const{getErrors:u}=P({kcContext:t}),o=s.formFieldStates.find(({attribute:d})=>d.name===e.name);return h(o!==void 0),(()=>{var d;switch(e.action){case"update":o.valueOrValues=e.valueOrValues;e:{const{attribute:a}=o,{kcNumberFormat:r}=(d=a.html5DataAnnotations)!==null&&d!==void 0?d:{};if(!r)break e;o.valueOrValues instanceof Array?o.valueOrValues=o.valueOrValues.map(c=>C(c,r)):o.valueOrValues=C(o.valueOrValues,r)}o.errors=u({attributeName:e.name,formFieldStates:s.formFieldStates});e:{const{displayErrorsImmediately:a=!1}=e;if(!a)break e;for(const r of e.valueOrValues instanceof Array?e.valueOrValues.map((...[,c])=>c):[void 0])s=M({state:s,kcContext:t,doMakeUserConfirmPassword:n,action:{action:"focus lost",name:e.name,fieldIndex:r}})}e:{if(n||e.name!=="password")break e;s=M({state:s,kcContext:t,doMakeUserConfirmPassword:n,action:{action:"update",name:"password-confirm",valueOrValues:e.valueOrValues,displayErrorsImmediately:e.displayErrorsImmediately}})}e:{if(!n||e.name!=="password")break e;s=M({state:s,kcContext:t,doMakeUserConfirmPassword:n,action:{action:"update",name:"password-confirm",valueOrValues:(()=>{const a=s.formFieldStates.find(({attribute:r})=>r.name==="password-confirm");return h(a!==void 0),a.valueOrValues})(),displayErrorsImmediately:e.displayErrorsImmediately}})}return;case"focus lost":if(o.hasLostFocusAtLeastOnce instanceof Array){const{fieldIndex:a}=e;h(a!==void 0),o.hasLostFocusAtLeastOnce[a]=!0;return}o.hasLostFocusAtLeastOnce=!0;return}h(!1)})(),Object.assign({},s)}function P(i){const{kcContext:t}=i,{messagesPerField:n,passwordPolicies:e}=t;function s(u){var o,d;const{attributeName:a,formFieldStates:r}=u,c=r.find(({attribute:p})=>p.name===a);h(c!==void 0);const{attribute:l}=c,x=(()=>{var p;let{valueOrValues:m}=c;e:{const{kcNumberUnFormat:g}=(p=l.html5DataAnnotations)!==null&&p!==void 0?p:{};if(!g)break e;m instanceof Array?m=m.map(v=>C(v,g)):m=C(m,g)}return m})();h(l!==void 0);e:{if(l.multivalued){const g=!((o=l.values)===null||o===void 0)&&o.length?l.values:[""];h(x instanceof Array);const v=x;if(JSON.stringify(g)!==JSON.stringify(v.slice(0,g.length)))break e}else{const g=(d=l.value)!==null&&d!==void 0?d:"";if(h(typeof x=="string"),g!==x)break e}let p;try{p=n.existsError(a)}catch{break e}if(!p)break e;return[{advancedMsgArgs:[n.get(a)],fieldIndex:void 0,source:{type:"server"}}]}e:{if(!l.multivalued||F({attribute:l}))break e;h(x instanceof Array);const p=x,m=p.map((...[,g])=>s({attributeName:a,formFieldStates:r.map(k=>k.attribute.name===a?(h(k.valueOrValues instanceof Array),{attribute:Object.assign(Object.assign({},l),{annotations:Object.assign(Object.assign({},l.annotations),{inputType:void 0}),multivalued:!1}),valueOrValues:k.valueOrValues[g]}):k)}).filter(k=>!(k.source.type==="other"&&k.source.rule==="requiredField")).map(k=>Object.assign(Object.assign({},k),{fieldIndex:g}))).reduce((g,v)=>[...g,...v],[]);n:{if(!l.required||p.every(g=>g!==""))break n;m.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}return m}e:{if(!l.multivalued||!F({attribute:l}))break e;const p="multivalued",m=l.validators[p];if(m===void 0)return[];const{min:g}=m,v=g?parseInt(`${g}`):l.required?1:0;h(!isNaN(v));const{max:k}=m,O=k?parseInt(`${k}`):1/0;h(!isNaN(O)),h(x instanceof Array);const j=x;return v<=j.length&&j.length<=O?[]:[{advancedMsgArgs:["error-invalid-multivalued-size",`${v}`,`${O}`],fieldIndex:void 0,source:{type:"validator",name:p}}]}h(typeof x=="string");const b=x,y=[];e:{if(a!=="password"||e===void 0)break e;n:{const p="length",m=e[p];if(!m)break n;const g=m;if(b.length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinLengthMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}n:{const p="digits",m=e[p];if(!m)break n;const g=m;if(b.split("").filter(v=>!isNaN(parseInt(v))).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinDigitsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}n:{const p="lowerCase",m=e[p];if(!m)break n;const g=m;if(b.split("").filter(v=>v===v.toLowerCase()&&v!==v.toUpperCase()).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinLowerCaseCharsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}n:{const p="upperCase",m=e[p];if(!m)break n;const g=m;if(b.split("").filter(v=>v===v.toUpperCase()&&v!==v.toLowerCase()).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinUpperCaseCharsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}n:{const p="specialChars",m=e[p];if(!m)break n;const g=m;if(b.split("").filter(v=>!v.match(/[a-zA-Z0-9]/)).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinSpecialCharsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}n:{const p="notUsername";if(!e[p])break n;const g=r.find(k=>k.attribute.name==="username");if(!g)break n;const v=(()=>{var k;let{valueOrValues:O}=g;h(typeof O=="string");a:{const{kcNumberUnFormat:j}=(k=l.html5DataAnnotations)!==null&&k!==void 0?k:{};if(!j)break a;O=C(O,j)}return O})();if(v===""||b!==v)break n;y.push({advancedMsgArgs:["invalidPasswordNotUsernameMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}n:{const p="notEmail";if(!e[p])break n;const g=r.find(v=>v.attribute.name==="email");if(!g)break n;h(typeof g.valueOrValues=="string");{const v=g.valueOrValues;if(v===""||b!==v)break n}y.push({advancedMsgArgs:["invalidPasswordNotEmailMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:p}})}}e:{if(a!=="password-confirm")break e;const p=r.find(m=>m.attribute.name==="password");h(p!==void 0),h(typeof p.valueOrValues=="string");{const m=p.valueOrValues;if(b===m)break e}y.push({advancedMsgArgs:["invalidPasswordConfirmMessage"],fieldIndex:void 0,source:{type:"other",rule:"passwordConfirmMatchesPassword"}})}const{validators:I}=l;e:{if(!l.required||b!=="")break e;y.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}e:{const p="length",m=I[p];if(!m)break e;const{"ignore.empty.value":g=!1,max:v,min:k}=m;if(g&&b==="")break e;const O={type:"validator",name:p};v&&b.length>parseInt(`${v}`)&&y.push({advancedMsgArgs:["error-invalid-length-too-long",`${v}`],fieldIndex:void 0,source:O}),k&&b.length<parseInt(`${k}`)&&y.push({advancedMsgArgs:["error-invalid-length-too-short",`${k}`],fieldIndex:void 0,source:O})}e:{const p="pattern",m=I[p];if(m===void 0)break e;const{"ignore.empty.value":g=!1,pattern:v,"error-message":k}=m;if(g&&b===""||new RegExp(v).test(b))break e;const O=[k??"shouldMatchPattern",v];y.push({advancedMsgArgs:O,fieldIndex:void 0,source:{type:"validator",name:p}})}e:{{const v=y[y.length-1];if(v!==void 0&&v.source.type==="validator"&&v.source.name==="pattern")break e}const p="email",m=I[p];if(m===void 0)break e;const{"ignore.empty.value":g=!1}=m;if(g&&b===""||B.test(b))break e;y.push({advancedMsgArgs:["invalidEmailMessage"],fieldIndex:void 0,source:{type:"validator",name:p}})}e:{const p="integer",m=I[p];if(m===void 0)break e;const{"ignore.empty.value":g=!1,max:v,min:k}=m;if(g&&b==="")break e;const O=parseInt(b),j={type:"validator",name:p};if(isNaN(O)){const _=["mustBeAnInteger"];y.push({advancedMsgArgs:_,fieldIndex:void 0,source:j});break e}if(v&&O>parseInt(`${v}`)){y.push({advancedMsgArgs:["error-number-out-of-range-too-big",`${v}`],fieldIndex:void 0,source:j});break e}if(k&&O<parseInt(`${k}`)){y.push({advancedMsgArgs:["error-number-out-of-range-too-small",`${k}`],fieldIndex:void 0,source:j});break e}}e:{const p="options",m=I[p];if(m===void 0||b===""||m.options.indexOf(b)>=0)break e;y.push({advancedMsgArgs:["notAValidOption"],fieldIndex:void 0,source:{type:"validator",name:p}})}return y}return{getErrors:s}}function F(i){var t,n;const{attribute:e}=i;return(n=(t=e.annotations.inputType)===null||t===void 0?void 0:t.startsWith("multiselect"))!==null&&n!==void 0?n:!1}function Q(i){const{attribute:t,values:n,fieldIndex:e}=i,s=(()=>{if(n.length===1)return!1;const o=(()=>{const{multivalued:d}=t.validators;if(d===void 0)return;const a=d.min;if(a!==void 0)return parseInt(`${a}`)})();return o===void 0?!0:n.length!==o})(),u=(()=>{if(e+1!==n.length)return!1;const o=(()=>{const{multivalued:d}=t.validators;if(d===void 0)return;const a=d.max;if(a!==void 0)return parseInt(`${a}`)})();return o===void 0?!0:n.length!==o})();return{hasRemove:s,hasAdd:u}}h();h();h();h();h();h();function X(i){const{doMakeUserConfirmPassword:t,i18n:n,kcContext:e}=i,s=W({kcContext:e,doMakeUserConfirmPassword:t}),[u,o]=w.useState(()=>s.getFormState());w.useEffect(()=>{const{unsubscribe:c}=s.subscribeToFormState(()=>{o(s.getFormState())});return()=>c()},[s]);const{advancedMsg:d,advancedMsgStr:a}=n;return{formState:w.useMemo(()=>({isFormSubmittable:u.isFormSubmittable,formFieldStates:u.formFieldStates.map(c=>({attribute:c.attribute,valueOrValues:c.valueOrValues,displayableErrors:c.displayableErrors.map((l,x)=>({errorMessage:f.jsx(w.Fragment,{children:d(...l.advancedMsgArgs)},`${c.attribute.name}-${x}`),errorMessageStr:a(...l.advancedMsgArgs),source:l.source,fieldIndex:l.fieldIndex}))}))}),[u]),dispatchFormAction:s.dispatchFormAction}}function ge(i){const{kcContext:t,i18n:n,kcClsx:e,onIsFormSubmittableValueChange:s,doMakeUserConfirmPassword:u,BeforeField:o,AfterField:d}=i,{advancedMsg:a}=n,{formState:{formFieldStates:r,isFormSubmittable:c},dispatchFormAction:l}=X({kcContext:t,i18n:n,doMakeUserConfirmPassword:u});w.useEffect(()=>{s(c)},[c]);const x={current:""};return f.jsx(f.Fragment,{children:r.map(({attribute:b,displayableErrors:y,valueOrValues:I})=>{var p;return f.jsxs(w.Fragment,{children:[f.jsx(Y,{attribute:b,groupNameRef:x,i18n:n,kcClsx:e}),o!==void 0&&f.jsx(o,{attribute:b,dispatchFormAction:l,displayableErrors:y,valueOrValues:I,kcClsx:e,i18n:n}),f.jsxs("div",Object.assign({className:e("kcFormGroupClass"),style:{display:b.name==="password-confirm"&&!u?"none":void 0}},{children:[f.jsxs("div",Object.assign({className:e("kcLabelWrapperClass")},{children:[f.jsx("label",Object.assign({htmlFor:b.name,className:e("kcLabelClass")},{children:a((p=b.displayName)!==null&&p!==void 0?p:"")})),b.required&&f.jsx(f.Fragment,{children:" *"})]})),f.jsxs("div",Object.assign({className:e("kcInputWrapperClass")},{children:[b.annotations.inputHelperTextBefore!==void 0&&f.jsx("div",Object.assign({className:e("kcInputHelperTextBeforeClass"),id:`form-help-text-before-${b.name}`,"aria-live":"polite"},{children:a(b.annotations.inputHelperTextBefore)})),f.jsx(ee,{attribute:b,valueOrValues:I,displayableErrors:y,dispatchFormAction:l,kcClsx:e,i18n:n}),f.jsx(L,{attribute:b,displayableErrors:y,kcClsx:e,fieldIndex:void 0}),b.annotations.inputHelperTextAfter!==void 0&&f.jsx("div",Object.assign({className:e("kcInputHelperTextAfterClass"),id:`form-help-text-after-${b.name}`,"aria-live":"polite"},{children:a(b.annotations.inputHelperTextAfter)})),d!==void 0&&f.jsx(d,{attribute:b,dispatchFormAction:l,displayableErrors:y,valueOrValues:I,kcClsx:e,i18n:n})]}))]}))]},b.name)})})}function Y(i){var t,n,e;const{attribute:s,groupNameRef:u,i18n:o,kcClsx:d}=i,{advancedMsg:a}=o;return((t=s.group)===null||t===void 0?void 0:t.name)!==u.current&&(u.current=(e=(n=s.group)===null||n===void 0?void 0:n.name)!==null&&e!==void 0?e:"",u.current!=="")?(h(s.group!==void 0),f.jsxs("div",Object.assign({className:d("kcFormGroupClass")},Object.fromEntries(Object.entries(s.group.html5DataAnnotations).map(([r,c])=>[`data-${r}`,c])),{children:[(()=>{var r;const c=(r=s.group.displayHeader)!==null&&r!==void 0?r:"",l=c!==""?a(c):s.group.name;return f.jsx("div",Object.assign({className:d("kcContentWrapperClass")},{children:f.jsx("label",Object.assign({id:`header-${s.group.name}`,className:d("kcFormGroupHeader")},{children:l}))}))})(),(()=>{var r;const c=(r=s.group.displayDescription)!==null&&r!==void 0?r:"";if(c!==""){const l=a(c);return f.jsx("div",Object.assign({className:d("kcLabelWrapperClass")},{children:f.jsx("label",Object.assign({id:`description-${s.group.name}`,className:d("kcLabelClass")},{children:l}))}))}return null})()]}))):null}function L(i){const{attribute:t,fieldIndex:n,kcClsx:e}=i,s=i.displayableErrors.filter(u=>u.fieldIndex===n);return s.length===0?null:f.jsx("span",Object.assign({id:`input-error-${t.name}${n===void 0?"":`-${n}`}`,className:e("kcInputErrorMessageClass"),"aria-live":"polite"},{children:s.filter(u=>u.fieldIndex===n).map(({errorMessage:u},o,d)=>f.jsxs(w.Fragment,{children:[u,d.length-1!==o&&f.jsx("br",{})]},o))}))}function ee(i){const{attribute:t,valueOrValues:n}=i;switch(t.annotations.inputType){case"textarea":return f.jsx(se,Object.assign({},i));case"select":case"multiselect":return f.jsx(re,Object.assign({},i));case"select-radiobuttons":case"multiselect-checkboxes":return f.jsx(te,Object.assign({},i));default:{if(n instanceof Array)return f.jsx(f.Fragment,{children:n.map((...[,s])=>f.jsx(V,Object.assign({},i,{fieldIndex:s}),s))});const e=f.jsx(V,Object.assign({},i,{fieldIndex:void 0}));return t.name==="password"||t.name==="password-confirm"?f.jsx(ne,Object.assign({kcClsx:i.kcClsx,i18n:i.i18n,passwordInputId:t.name},{children:e})):e}}}function ne(i){const{kcClsx:t,i18n:n,passwordInputId:e,children:s}=i,{msgStr:u}=n,{isPasswordRevealed:o,toggleIsPasswordRevealed:d}=R({passwordInputId:e});return f.jsxs("div",Object.assign({className:t("kcInputGroup")},{children:[s,f.jsx("button",Object.assign({type:"button",className:t("kcFormPasswordVisibilityButtonClass"),"aria-label":u(o?"hidePassword":"showPassword"),"aria-controls":e,onClick:d},{children:f.jsx("i",{className:t(o?"kcFormPasswordVisibilityIconHide":"kcFormPasswordVisibilityIconShow"),"aria-hidden":!0})}))]}))}function V(i){var t;const{attribute:n,fieldIndex:e,kcClsx:s,dispatchFormAction:u,valueOrValues:o,i18n:d,displayableErrors:a}=i,{advancedMsgStr:r}=d;return f.jsxs(f.Fragment,{children:[f.jsx("input",Object.assign({type:(()=>{const{inputType:c}=n.annotations;return c!=null&&c.startsWith("html5-")?c.slice(6):c??"text"})(),id:n.name,name:n.name,value:e!==void 0?(h(o instanceof Array),o[e]):(h(typeof o=="string"),o),className:s("kcInputClass"),"aria-invalid":a.find(c=>c.fieldIndex===e)!==void 0,disabled:n.readOnly,autoComplete:n.autocomplete,placeholder:n.annotations.inputTypePlaceholder===void 0?void 0:r(n.annotations.inputTypePlaceholder),pattern:n.annotations.inputTypePattern,size:n.annotations.inputTypeSize===void 0?void 0:parseInt(`${n.annotations.inputTypeSize}`),maxLength:n.annotations.inputTypeMaxlength===void 0?void 0:parseInt(`${n.annotations.inputTypeMaxlength}`),minLength:n.annotations.inputTypeMinlength===void 0?void 0:parseInt(`${n.annotations.inputTypeMinlength}`),max:n.annotations.inputTypeMax,min:n.annotations.inputTypeMin,step:n.annotations.inputTypeStep},Object.fromEntries(Object.entries((t=n.html5DataAnnotations)!==null&&t!==void 0?t:{}).map(([c,l])=>[`data-${c}`,l])),{onChange:c=>u({action:"update",name:n.name,valueOrValues:e!==void 0?(h(o instanceof Array),o.map((l,x)=>x===e?c.target.value:l)):c.target.value}),onBlur:()=>u({action:"focus lost",name:n.name,fieldIndex:e})})),(()=>{if(e===void 0)return null;h(o instanceof Array);const c=o;return f.jsxs(f.Fragment,{children:[f.jsx(L,{attribute:n,kcClsx:s,displayableErrors:a,fieldIndex:e}),f.jsx(ae,{attribute:n,values:c,fieldIndex:e,dispatchFormAction:u,i18n:d})]})})()]})}function ae(i){const{attribute:t,values:n,fieldIndex:e,dispatchFormAction:s,i18n:u}=i,{msg:o}=u,{hasAdd:d,hasRemove:a}=Q({attribute:t,values:n,fieldIndex:e}),r=`-${t.name}-${e+1}`;return f.jsxs(f.Fragment,{children:[a&&f.jsxs(f.Fragment,{children:[f.jsx("button",Object.assign({id:`kc-remove${r}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>s({action:"update",name:t.name,valueOrValues:n.filter((c,l)=>l!==e)})},{children:o("remove")})),d?f.jsx(f.Fragment,{children:" | "}):null]}),d&&f.jsx("button",Object.assign({id:`kc-add${r}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>s({action:"update",name:t.name,valueOrValues:[...n,""]})},{children:o("addValue")}))]})}function te(i){const{attribute:t,dispatchFormAction:n,kcClsx:e,i18n:s,valueOrValues:u}=i,{classDiv:o,classInput:d,classLabel:a,inputType:r}=(()=>{const{inputType:l}=t.annotations;switch(h(l==="select-radiobuttons"||l==="multiselect-checkboxes"),l){case"select-radiobuttons":return{inputType:"radio",classDiv:e("kcInputClassRadio"),classInput:e("kcInputClassRadioInput"),classLabel:e("kcInputClassRadioLabel")};case"multiselect-checkboxes":return{inputType:"checkbox",classDiv:e("kcInputClassCheckbox"),classInput:e("kcInputClassCheckboxInput"),classLabel:e("kcInputClassCheckboxLabel")}}})(),c=(()=>{var l,x;e:{const{inputOptionsFromValidation:b}=t.annotations;if(b===void 0)break e;const y=t.validators[b];if(y===void 0||y.options===void 0)break e;return y.options}return(x=(l=t.validators.options)===null||l===void 0?void 0:l.options)!==null&&x!==void 0?x:[]})();return f.jsx(f.Fragment,{children:c.map(l=>f.jsxs("div",Object.assign({className:o},{children:[f.jsx("input",{type:r,id:`${t.name}-${l}`,name:t.name,value:l,className:d,"aria-invalid":i.displayableErrors.length!==0,disabled:t.readOnly,checked:u instanceof Array?u.includes(l):u===l,onChange:x=>n({action:"update",name:t.name,valueOrValues:(()=>{const b=x.target.checked;if(u instanceof Array){const y=[...u];return b?y.push(l):y.splice(y.indexOf(l),1),y}return x.target.checked?l:""})()}),onBlur:()=>n({action:"focus lost",name:t.name,fieldIndex:void 0})}),f.jsx("label",Object.assign({htmlFor:`${t.name}-${l}`,className:`${a}${t.readOnly?` ${e("kcInputClassRadioCheckboxLabelDisabled")}`:""}`},{children:D(s,t,l)}))]}),l))})}function se(i){const{attribute:t,dispatchFormAction:n,kcClsx:e,displayableErrors:s,valueOrValues:u}=i;h(typeof u=="string");const o=u;return f.jsx("textarea",{id:t.name,name:t.name,className:e("kcInputClass"),"aria-invalid":s.length!==0,disabled:t.readOnly,cols:t.annotations.inputTypeCols===void 0?void 0:parseInt(`${t.annotations.inputTypeCols}`),rows:t.annotations.inputTypeRows===void 0?void 0:parseInt(`${t.annotations.inputTypeRows}`),maxLength:t.annotations.inputTypeMaxlength===void 0?void 0:parseInt(`${t.annotations.inputTypeMaxlength}`),value:o,onChange:d=>n({action:"update",name:t.name,valueOrValues:d.target.value}),onBlur:()=>n({action:"focus lost",name:t.name,fieldIndex:void 0})})}function re(i){const{attribute:t,dispatchFormAction:n,kcClsx:e,displayableErrors:s,i18n:u,valueOrValues:o}=i,d=t.annotations.inputType==="multiselect";return f.jsxs("select",Object.assign({id:t.name,name:t.name,className:e("kcInputClass"),"aria-invalid":s.length!==0,disabled:t.readOnly,multiple:d,size:t.annotations.inputTypeSize===void 0?void 0:parseInt(`${t.annotations.inputTypeSize}`),value:o,onChange:a=>n({action:"update",name:t.name,valueOrValues:d?Array.from(a.target.selectedOptions).map(r=>r.value):a.target.value}),onBlur:()=>n({action:"focus lost",name:t.name,fieldIndex:void 0})},{children:[!d&&f.jsx("option",{value:""}),(()=>{var r,c;e:{const{inputOptionsFromValidation:l}=t.annotations;if(l===void 0)break e;h(typeof l=="string");const x=t.validators[l];if(x===void 0||x.options===void 0)break e;return x.options}return(c=(r=t.validators.options)===null||r===void 0?void 0:r.options)!==null&&c!==void 0?c:[]})().map(r=>f.jsx("option",Object.assign({value:r},{children:D(u,t,r)}),r))]}))}function D(i,t,n){var e;const{advancedMsg:s}=i;if(t.annotations.inputOptionLabels!==void 0){const{inputOptionLabels:u}=t.annotations;return s((e=u[n])!==null&&e!==void 0?e:n)}return t.annotations.inputOptionLabelsI18nPrefix!==void 0?s(`${t.annotations.inputOptionLabelsI18nPrefix}.${n}`):n}export{ge as default};
